## Ethreum platform Background

* Ethreum protocol powered platform for multiple decentralized apps and blockchains.

* blockchain def accoding to [Ethereum website](https://ethereum.org/en/what-is-ethereum/)

    > A blockchain is a database of transactions that is updated and shared across many computers in a network. Every time a new set of transactions is added, its called a “block” - hence the name blockchain. Public blockchains like Ethereum allow anyone to add, but not remove, data. If someone wanted to alter any of the information or cheat the system, they’d need to do so on the majority of computers on the network. That is a lot! This makes decentralized blockchains like Ethereum highly secure.

* possible capabilities of Ethereum

    + banking 

    + open-internet: eveyone controls their own assets and identity as opposed to a corporation

    + peer-to-peer network: no intermediate entity for asset transfer, coordination or agreement making 

    + censorship-resistent: decentralization makes it impossible for a corporate entity from hindering trascational activity 

    + commerce guarantees: exchange ot products occur only when agreed payment is met, developers are assured rules of transaction will remain unchanged 

    + composable products: app development is interdependent on the building blocks they are build from, meaning up/down chain apps must remain for the app "ecosystem" to stay in place 

* Ethereum advantages over Bitcoin

    + Bitcoin can only carry out trasactions and send simple messages, but Ethereum can do that plus allow user to write up general contracts or program. 

    + Ethereum is more like a marketplace of financial services, games, social networks and other apps.

### Benefits of using Ethereum

* cheaper and faster cross border payments: uses stablecoins, novel type of cryptocurrency, which relies on a more stable asset (aka american dollar) as the basis for its value. The cross border transaction is not limited to amount and usually take mere minutes compared to days/weeks for typical financial institutions, and at a much cheaper service fee. 

* great financial alternative at times of crisis: Ethereum is a great alternative in for example war torn regions where there is political oppression and bank access is quite limited. Also stablecoins don't have as much value fluctuation like local currecy and are less susceptipal to hyperinflation.

* Since about 2021 more local creators have been using the platform, leading to a 3.5 billion in their growth 

* reward exchanges have shapes the gaming industry, players are able to cash in their rewards for playing games through Ethereum where as opposed to the black market where there is much less security and the likelihood to receive lower value for their game tokens 

### How is Ethereum decentralized

* it isn't run by a single organization 

* the blockchain are made of Nodes, any computer running the ethereum protocol and able to participate in the secure network by having a native token (ETH). Access wihtout permission is granted when a node has a minimum 32 ETH.

* source code is also community supported, changed, updated in multiple programming languages.

### Ethereum Components

* Cryptocurrency are digital tokens secured using a blockchain. 

    + Bitcoin was the first cryptocurrency, which is used to transfer value between two parties without having to trust a middleman. Only entity to trust is the Bitcoin code itself since it is open and freely available. 
    
    + Security of data and assets are garaunteed by cryptography, where only the content of communnication can be read for those intended for.

    * Ethereum crptocurrency is ether (ETH), which is used to pay for the computation power it takes to run apps and organizations on the blockchain.

* Ether (ETH), Ethereum's cryptocurrency 

    + need some currency to pay for the computation power taken to run the Ethereum virtual machines to execute all protocol 

    + its a pure digital currency that can be sent precisely to any staker within the secure network. 

    + during The Merge upgrade on Sept 15 2022, the blockchain transitioned from a proof-of-work (calc value by computation power) to a proof-of-stake (user show proof of value of its cryptocurrency as proof of stake in the network to participate in transactions) --> this led to a 99.95% reduction in energy consumption, making it a low-carbon blockchain while maintaining security and scalability.

    + other benefits: secured by cryptography, peer-topeer payment, no centralized control, open to anyone, available as a flexible amount (its divisible by up to 18 decimal places) 

    + ETH validators: like record-keepers of the system, users randomly selected to propose a transaction, they are rewarded a small comission for carrying this out, if fail to carry out the validating duties then they loose out in the stake/ETH they placed. The threat of loosing ETH due to staking keeps the system honest.

* Smart contracts 

    + computer programs within the blockchain that act as building blocks for decentralized apps and organizations. They are triggered by transactions of other users. 

    + their advantage is once they are published, they remain operational so long as the blockchain exists and can't be ammended or completely removed (not even by the author).

    + these contracts can also be used by any entity, no exclusion or discrimination. 

    + examples of smart contracts: lending apps, decentralized trading exchanges, insurance, quadratic funding, social networks, NFTs.

### Types of Tokens

* they are assets that users can use to trade as well 

* list of token types: 

    + stablecoins: least volatile of Ethereum tokens, they mirror the value of traditional currency 

    + decentralized finance (DeFi): financial system for Ethereum tokens 

    + Non-fungible tokens (NFTs)/collectible tokens: they represent ownership of items, like collectible game items, digitial art, or other unique assets

    + decentralized autonomous organizations (DAOs): internet communities governed by token holders 

    + governance tokens: they rep voting power in decentralized organizations 

    + shit coins: token easily created, may not be as credible and actually created by malicious parties 

### Ethereum wallets 

* they are applications that give control over user account, consists of everything needed to prove identity and handle assets.

* it is just a "platform" to interact with Ethereum account, can switch wallet apps anytime

* wallet providers dont have access to the funds, they are just a portal tool for access 

* Ethereum account is actually a pair of keys: 1 key is used to create the address (like inbox) used to identify digital assets and the other is a secret key used for verification, trasaction approval etc.

* wallet types: 

    + physical hardware wallet: devices that keep crypto offline --> very secure 

    + mobile applications: make funds accessible anywhere 

    + browser wallets: web app that permits users to interact with their account directly in the browser 

    + browser extension wallets: downloadable extensions for the web browser 

    + desktop application: to manage funds from a local machine 

### Smart Contracts 

* computer prgrams in the blockchain that follwo an if-then logic that are guaraunteed to be executed according to rules defined in the code, which cannot be changed once created. 

* a good metaphor example of this concept is the vending machine: 

    + specific inputs guarantee a predetermined output.

    + select product --> vending machine states price --> user inputs money --> machine verifies amount is correct --> machine provides the requested item 

* there is no need for a human to approve a transaction when conditions are met. Once all conditions are met in the code, the transaction is immediately carried out 

* the outcome of smart contracts are predictable because they are carried out only when the conditions are precisely met by the code and no need for multiple ppl to evaluate the outcome for and come to different conclusions 

* very useful for audits and tracking since they are used and saved in a public blockchain

* there is privacy protection since Ethereum is a pseudonymous network where transactions are tied to unique cryptographic address and not to a real person address 

## Blockchain KPI metrics 

## Transaction metrics

* transaction volume: number of trasactions processed by the blockchain within a period of time. Indicates active use and reflect popularity and adoption.

* transaction value: value of assets moved acorss the blockchain in a given period of time. This is indicative of significant economic activity.

* active addresses: unique count of address involved in trasactions during a given period of time. This is a user engagement metric.

* total addresses: number of unique addresses in the network irrespective of their activity. This provides info on the networks growth and user base. Another metric that demonstrates popularity and adoption. 

## Network Health etrics

* hash rate: measures total computational power dedicated to mining and securing the blockchain. It is crucial for proof-of-work (POW)
 for it represents the networks security level. A higher rate means that the network is more secure and resistant to attacks and more computational resources are required to compromise the network.

* block time: avg amt of time it take for a new block to be added to the chain. This metric influences transaction confirmation times, with shorter avg times reflecting quicker confirmations.

* block size: avg size of blocks in blockchain. Larger block sizes indicate a given block can handle more transactions, which leads to increase throughput with the the need of more storage and processing power from the node. 

* network fees: cost paid by users to have transactions processed and confirmed. Higher fees indicate network congestion, which goes hand in hand with higher demand and transaction processing. Higher fees also reflect users willingness to pay for transaction priority.

### Value metrics

* NVT (network value to transactions): a ratio calculated as market capitilization divided by transaction volume. It the same as the price-to-earning (P/E) ratio in finance. A lower value reflects the networks value is well-supported by transaction activity.

    + market capitilization/cap: current price of cryptocurrency x totla num of coins in circulation.

    + market capitilization gives a sense of the cryptocurrency market, whether it is over or undervalued.

## Decentralization metrics

* DTPS (decentralized transactions per second): its the measurement of transaction speed with level of decentralization, factoring in throughput and decentralization. This is a good metric to compare different blockchains.

* gini coefficient: measure of inequality in the distribution of resources (like wealth or token holding). A lower coefficient  reveals more even distribution, while the other end indicates greater inequality.

* nakamoto coefficient: num of entities required to collude/disrupt the networks consensus mechanism. This evaluates how many entities control the networks consensus. Higher coefficient indicates a more decentralized network.

## Good to knows for queriying block chain data 

* slots per day

    + since `The Merge` on sept16 2022, there is a max posibility to add 7200 clots per day to the blockchain 

    + a single block occupies a slot 

    + number of slot added per day can be calculated from `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.blocks`

* lossless column

    + they are numerical dimensions with `_lossless` suffix in its name.

    + there are some values that need uint256 numeric precision, which BigQuery mostly can't provide --> so instead these values are provided as numeric and string (`_lossless`) format 

    + BigQuery provides out of the box UDFs to handle the lossless ones: `bqutil.fn.bignumber_add`, `bqutil.fn.bignumber_sub`, `bqutil.fn.bignumber_mul`, `bqutil.fn.bignumber_div`, `bqutil.fn.bignumber_sum`, `bqutil.fn.bignumber_avg`

* stake withdrawals 

    + values can be found in `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.blocks.withdrawals`

    + this is where stakers can withdraw their locked-up ETH 

    + This approach to staking withdrawals avoids requiring stakers to manually submit a transaction requesting a particular amount of ETH to be withdrawn. This means there is no gas (transaction fee) required, and withdrawals also do not compete for existing execution layer block space.

* EIP-1559

    + an ethereum improvement proposal to reduce gas feed and make the currency deflationary 

    + previously trasaction based was based on user pitching the best price to minors per block, those that pitched the highest price had the transaction processed the fatest and the reverse is true for the lowest bids. This meant that that the market fluctuated a lot in terms of best vs worst bids and led to bad user experience. Aka demand market.

    + the aim of the proposal is to make better predictions of the base fees and to have better user experience for the blockchain.

    +  at a high level overview, this was able to achieve deflation by having blocksize increase rather than base fees increasing so much and by users setting a maximum fee they were willing to pay

    + the `London Hard Fork` implementation can be seen starting on block number `12965000`, before this base fees are burned and miners only earn priority fee.

    + calculation of priority fee: `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.transactions.effective_gas_price` - `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.blocks.base_fee_per_gas`

* USDC stable coins 
    
    + fiat-backed stablecoin, meaning it is backed by reserve assets in the traditional financial system, such as cash, cash equivalents, or securities. In the case of USDC, it is designed to be pegged to the US dollar and redeemable 1:1 for US dollars.

    + held within US regulatory financail institutions 

    + they are run in multiple blockchains 

    + contracts that issues USDC stable tokens: `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.transactions.to_address` = `0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48`

    + when USDC burned vs minted:

        - burnt: `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.transactions.input` like `0x42966c68%`

        - minted: `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.transactions.input` like `0x40c10f19%`

    + to determine which accounts/wallets have the USDC balances: `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.token_transfers` where `token` = `0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48`

* null address = `0x0000000000000000000000000000000000000000`

* BAYC tokens are `0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d`

* `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.token_transfers.address` is actually the token ID

* `bigquery-public-data.goog_blockchain_ethereum_mainnet_us.accounts.is_contract` true/false is determine if record is a wallet/account or a contract 

* types of addresses:

    + externally owned account(EOA)

    + smart contract address 

    + miner address 

    + token contract address 

    + staking validator address 

    + liquidity pool address 

    + multisig wallet address 

    + burn address (`0x0000000000000000000000000000000000000000`)

## Helpful Links

### Blockchain centric

* Bigquery overview of its [blockchain analytics](https://cloud.google.com/blockchain-analytics/docs/overview)

* article on [blockchain KPI analysis](https://www.paulsimroth.at/blog/kpis-on-the-blockchain-in-depth-guide)

* [Ethereum](https://ethereum.org/en/) blockchain website, good source for backgroun and intro info 

* marketplace page on [Ethereum Blockchain](https://console.cloud.google.com/marketplace/product/bigquery-public-data/blockchain-analytics-ethereum-mainnet-us?inv=1&invt=Abx3vg&project=pipeline-analysis-455005) dataset in BigQuery 

* [post](https://cloud.google.com/blog/products/data-analytics/data-for-11-more-blockchains-in-bigquery-public-datasets) on blockchain public dataset into to bigquery, entrprise supported

* [blockchain documentation](https://cloud.google.com/blockchain-analytics/docs/example-ethereum) with example queries provided by google.

* [BigQuery UDFs](https://cloud.google.com/blockchain-analytics/docs/uint256) for making more accurate calculations.

* [Etherscan.io](https://etherscan.io/), place to look up the name tags for address, contract and tokens.

* [roadmap article](https://ethereum.org/en/roadmap/merge/) about `The Merge`, occuring `sept 16 2022`. 

* [YT video on EIP-1559](https://www.youtube.com/watch?v=MGemhK9t44Q), really good explanation on how this release brought lower fluctuation in transaction fees.

### Cryptocurrency centric

* [article](https://cloud.google.com/blog/products/data-analytics/introducing-six-new-cryptocurrencies-in-bigquery-public-datasets-and-how-to-analyze-them?hl=en) on cryptocurrency data loaded to BigQuery and how to analyze them 

* article on [crypto KPI analysis](https://cointelegraph.com/learn/articles/the-most-common-crypto-metrics-a-beginners-guide)

* [datacamp](https://www.datacamp.com/blog/python-bitcoin) bitcoin time-series analysis in python 

* Allen Page's [talk](https://www.youtube.com/watch?v=_IX6bhE6Qu4) on cryptocurrencies in BigQuery when it was first introduced

* [article](https://cloud.google.com/blog/products/data-analytics/ethereum-bigquery-public-dataset-smart-contract-analytics): Ethereum in BigQuery: a Public Dataset for smart contract analytics

* [article](https://medium.com/google-cloud/full-relational-diagram-for-ethereum-public-data-on-google-bigquery-2825fdf0fb0b) on the relationstional diagram schema of the crypto_Ethereum data 

* [article](https://cloud.google.com/blog/products/data-analytics/ethereum-bigquery-how-we-built-dataset) on how the Ethereum public dataset was built in BigQuery 

* marketplace page on [Ethereum Crytocurrency](https://console.cloud.google.com/marketplace/product/ethereum/crypto-ethereum-blockchain?inv=1&invt=Abx3vA&project=pipeline-analysis-455005) dataset in BigQuery 

* [article1](https://expertbeacon.com/ethereum-and-bitcoin-data-at-your-fingertips-analyzing-crypto-activity-with-google-bigquery/) and [article2](https://bitquery.io/blog/querying-bigquery-blockchain-dataset) on analyzing cryptodata in BigQuery 